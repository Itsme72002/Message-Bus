=message-bus=

MessageBus is a distributed messaging platform built on top of hornetq, and supports java and ruby client. This project includes a patch to HornetQ, and the java and ruby client that works with it.

==Building the server==
Prerequisite: 
* java 6 or higher
* maven 2
* ant

Following steps assume you are in hornetq-server directory.

===Check out and patch server===
 $ ./checkout-hornetq.sh

This step first checks out the Jboss HornetQ project, then applies a patch on top of it. It can take a few minutes depending on your internet speed.

===Build the server===
If in Unix/Linux:

 $ cd hornetq
 $ ./build.sh bin-distro

If in OSX:

 $ cd hornetq
 $ ./mac-build.sh bin-distro

The server build is located in hornetq/build/hornetq-2.2.22.SNAPSHOT

===Configurate the server===
'''hornetq-server/config''' directory contains several config files that you should be aware of. Refer to [[http://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html/configuration-index.html|Hornetq Config]] for documentation of each config file. There are several mandatory fields required for a working cluster:

#'''Persistence directories''' in '''hornetq-configuration.xml'''. You need to point the server to directories that store your journal, paging and bindings. Default is '''/var/hornetq/*'''. You need to create these directories before the server can be started.

   <paging-directory>/var/hornetq/paging</paging-directory>
   <bindings-directory>/var/hornetq/bindings</bindings-directory>
   <journal-directory>/var/hornetq/journal</journal-directory>

#'''jmx directory'''. In log4j.properties, define the file jmx logs to. Below is the default:
 log4j.appender.jmx.File=/var/hornetq/log/jmx.log
